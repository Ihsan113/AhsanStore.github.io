<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pesan Produk Mobile Legends</title>
  <style>
    /* Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: #121212;
      color: #ffffff;
      justify-content: center;
      align-items: center;
      height: 100vh;
      
    }


    
    .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: #1e1e1e;
        padding: 10px;
        color: #ffffff;
        border-bottom: 1px solid #444;
    }

    .header h1 {
        font-size: 16px;
        margin: 0;
        text-align: center;
        flex-grow: 1;
        font-family: 'Press Start 2P', cursive;
    }

    .back-button {
    background: none;
    border: none;
    color: #ffffff;
    font-size: 18px;
    cursor: pointer;
    padding: 10px;
    transition: color 0.3s ease;
    position: relative;
    left: -50px; /* Move the button to the left */
}

    .back-button i {
        margin-right: 5px;
    }

    .back-button:hover {
        color: #00e676;
    }


    
     h3 {
      
      margin-bottom: 40px;
      font-size: 20px;
      color: #ffffff;
    }

   .form-card {
  margin: 20px auto; /* Centers the card horizontally and adds vertical spacing */
  padding: 20px;
  width: 90%; /* Set width relative to the screen, so it scales */
  max-width: 600px; /* Limits the maximum width */
  background-color: #1e1e1e;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}


    .products-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 20px;
    }

    .product {
      background-color: #1e1e1e;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      position: relative;
      border: 2px solid #2d323cda; 

      transition: border-color 0.3s ease;
    }

    .product.selected {
      border-color: #00e676;
    }

    .product h3 {
      margin-bottom: 10px;
      font-size: 16px;
    }

    .product .harga-asli {
      text-decoration: line-through;
      color: #bbbbbb;
    }

    .product .harga-diskon {
      color: #00e676;
    }

    .metode-pembayaran {
      margin-bottom: 20px;
    }

    input[type="text"], input[type="number"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: none;
      border-radius: 4px;
      background-color: #2c2c2c;
      color: #ffffff;
      font-size: 16px;
    }

    /* Button */
    .button-container {
  display: grid;            /* Enable grid */
  place-items: center;     
  margin-bottom: 65px;
}

button {
  width: 100%;
  max-width: 280px;
  padding: 12px;
  background-color: #6200ea;
  color: #ffffff;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

button:hover {
  background-color: #3700b3;
}

   /* Spinner Style */
.spinner {
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top: 4px solid #6200ea;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    display: none;
    margin: 0 auto;
}

/* Modal styling */
.modal {
    position: fixed;
    left: 0;
    bottom: -100%;
    width: 100%;
    background-color: #1e1e1e;
    color: #ffffff;
    border-radius: 16px 16px 0 0;
    padding: 20px;
    box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.5);
    transition: all 0.4s ease-in-out;
}

.modal.show {
    bottom: 0;
}


.modal-header {
  display: flex;
  flex-direction: column; /* Stack the drag handle and title */
  justify-content: center;
  align-items: center;
}

.modal-drag-handle {
  width: 50px; /* Width of the line */
  height: 5px; /* Height of the line */
  background-color: #bbbbbb; /* Light grey color */
  border-radius: 2.5px; /* Rounded corners */
  margin-bottom: 10px; /* Space between handle and title */
}

.modal-content {
  margin-bottom: 30px;
  font-family: 'Press Start 2P', cursive;
  font-size: 8px;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8), 0 0 25px #00c853;
  background: linear-gradient(135deg, rgba(0, 100, 0, 0.8), rgba(0, 200, 0, 0.3));
  padding: 10px;
  border-radius: 8px;
  border: 2px solid #00c853;
  display: flex; /* Use flexbox for layout */
  flex-direction: column; /* Stack items vertically */
  align-items: center; /* Center items */
}

.modal-content p {
  margin: 5px 0; /* Spacing between paragraphs */
  width: 100%; /* Full width */
  text-align: left; /* Align text to the left */
  border-bottom: 1px solid #00c853; /* Add a bottom border */
  padding: 5px 0; /* Add padding for better spacing */
}

.modal-content p:last-child {
  border-bottom: none; /* Remove border for the last item */
}

.modal button {
  background-color: #00c853;
  border: 2px solid #00c853;
  border-radius: 4px; /* Rounded corners */
  padding: 10px 20px; /* Add some padding */
  font-size: 16px; /* Adjust font size */
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.modal button:hover {
  background-color: #3700b3; /* Change color on hover */
  border-color: #3700b3; /* Change border color on hover */
}


 /* Footer */
  footer {
    background-color: #222;
    color: #fff;
    padding: 50px 20px;
    font-family: 'Roboto', sans-serif;
    border-top: 1px solid #444;
}

.footer-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

.footer-logo {
    text-align: left;
}

.footer-logo h2 {
    font-size: 32px;
    font-weight: bold;
    color: #f39c12;
    margin-bottom: 15px;
}

.footer-logo p {
    max-width: 400px;
    font-size: 15px;
    line-height: 1.8;
}

.footer-links {
    display: flex;
    justify-content: space-around;
    gap: 50px;
}

.footer-links ul {
    list-style: none;
    padding: 0;
}

.footer-links li {
    margin-bottom: 12px;
}

.footer-links a {
    color: #f39c12;
    text-decoration: none;
    font-size: 15px;
    transition: color 0.3s ease, transform 0.3s ease;
}

.footer-links a:hover {
    color: white;
    transform: translateY(-3px);
}

.footer-social {
    text-align: center;
    margin-top: 20px;
}

.footer-social a {
    color: #f39c12;
    margin: 0 15px;
    font-size: 24px;
    transition: color 0.3s ease, transform 0.3s ease;
}

.footer-social a:hover {
    color: white;
    transform: scale(1.1);
}

.footer-legal {
    grid-column: 1 / -1;
    text-align: center;
    margin-top: 30px;
    font-size: 13px;
    color: #999;
}

.footer-legal p:hover {
    color: white;
}


    .description-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: #20253fe4;
        padding: 20px;
        height: 250px;
        margin-top: 2px;
        margin-bottom: 8px;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .text-description {
        max-width: 70%;
    }

    .text-description h2 {
        font-size: 24px;
        margin: 0 0 10px;
        font-family: 'Press Start 2P', cursive;
    }

    .text-description p {
        font-size: 14px;
        margin: 0 0 20px;
        line-height: 1.6;
    }

    .labels {
        display: flex;
        gap: 10px;
        margin-top: 8px;
        justify-content: center; /* Posisi center secara horizontal */
    }

    .label-safe,
    .label-fast {
        background-color: #00e676;
        color: white;
        font-size: 14px;
        padding: 8px 12px;
        border-radius: 5px;
        font-family: 'Roboto', sans-serif;
        display: flex;
        align-items: center;
    }

    .label-safe {
        background-color: #28a745;
    }

    .label-fast {
        background-color: #ffcc00;
    }

    .label-safe i,
    .label-fast i {
        margin-right: 8px;
        font-size: 16px;
    }
    .image-container {
        max-width: 25%;
        text-align: right;
    }

    .game-image {
        width: 100px;
        border-radius: 10px;
    }

.result {
            margin-top: 20px;
            text-align: center;
        }
        /* Spinner Style */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #6200ea;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: none;
            margin: 0 auto;
            margin-top: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

  </style>
</head>
<body>

 <!-- Header with Back Button -->
<header class="header">
    <button class="back-button" onclick="window.history.back();">
        <i class="fas fa-arrow-left"></i> Kembali
    </button>
    <h1>Product PUBG</h1>
</header>

<div class="description-container">
    <div class="text-description">
        <h2>PUBG MOBILE</h2>
        <p>PUBG (PlayerUnknown's Battlegrounds) adalah game battle royale yang sangat populer di seluruh dunia. Nikmati pengalaman bertahan hidup yang mendebarkan dengan mode permainan yang seru dan realistis!</p>
        
    </div>
    <div class="image-container">
        <img src="https://static-src.vocagame.com/topupnolimit/unnamed%20(3)-04102-original.png" alt="Mobile Legends" class="game-image">
    </div>
</div>

<div class="labels">
    <span class="label-safe">
        <i class="fas fa-shield-alt"></i> 100% Aman
    </span>
    <span class="label-fast">
        <i class="fas fa-clock"></i> Proses 1-2 Menit
    </span>
</div>

 <!-- Form UID -->
<form id="checkForm">
    <div class="form-card">
        <h3>1. Masukkan ID</h3>
        <input type="text" id="uid" placeholder="Masukkan ID" required>
       
              
    </div>
</form>


  <!-- Pilihan Produk -->
  <div class="form-card">
    <h3>2. Pilih Produk</h3>
    <div class="products-grid" id="productContainer">
      <!-- Produk akan diisi dari Firebase -->
    </div>
  </div>

  <!-- Metode Pembayaran -->
  <div class="form-card metode-pembayaran">
    <h3>3. Pilih Metode Pembayaran</h3>
    <input type="radio" id="qrPayment" name="paymentMethod" value="QR" checked>
    <label for="qrPayment">Pembayaran via QR</label>
  </div>

  <!-- Nomor Telepon -->
  <div class="form-card">
    <h3>4. Masukkan Nomor Telepon</h3>
    <input type="text" id="phoneNumber" placeholder="Masukkan Nomor Telepon" required>
  </div>
  
<div class="button-container">
  <button id="placeOrderBtn">Pesan</button>
</div>

<!-- Modal -->
<div id="orderModal" class="modal">
  <div class="modal-header">
    <!-- Drag handle line -->
    <div class="modal-drag-handle"></div>
    <h3>Detail Pesanan</h3>
   
  <div class="modal-content">
    <p id="orderDetails"></p>
  </div>
  <button id="confirmOrderBtn">Lanjutkan</button>
</div>
</div>


<footer>
    <div class="footer-container">
        <div class="footer-logo">
            <h2>AhsanStore</h2>
            <p>AhsanStore adalah website top up murah, cepat, terpercaya dengan banyak pilihan produk, melayani transaksi 24 jam, dan dengan metode pembayaran terlengkap.</p>
        </div>
        <div class="footer-links">
            <ul>
                <li><a href="https://ahsanstorecom.vercel.app/menu/bantuan.html">Bantuan</a></li>
                
                <li><a href="https://ahsanstorecom.vercel.app/menu/legal.html">Legal</a></li>
            </ul>
            <ul>
                <li><a href="https://ahsanstorecom.vercel.app/menu/syarat.html">Syarat & Ketentuan</a></li>
                <li><a href="https://ahsanstorecom.vercel.app/menu/kebijakan.html">Kebijakan Privasi</a></li>
               
            </ul>
        </div>
        <div class="footer-social">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="https://www.instagram.com/firdausalamsyahbudi?igsh=MW9zdzliNHBwOHh2ag=="><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
        </div>
        <div class="footer-legal">
            <p>&copy; 2024 AhsanStore Semua hak cipta dilindungi.</p>
        </div>
    </div>
</footer>



  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-firestore.js"></script>
<script>
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA9qR6fQwVhhvOOZobTnhkmanwnyM_eN6A",
  authDomain: "ahsanstore-afd75.firebaseapp.com",
  projectId: "ahsanstore-afd75",
  storageBucket: "ahsanstore-afd75.appspot.com",
  messagingSenderId: "628733570435",
  appId: "1:628733570435:web:054af025d091f89490dab6",
  measurementId: "G-N35XLD1BMK"
};
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Menampilkan produk Mobile Legends dari Firebase
  const productContainer = document.getElementById('productContainer');
  let selectedProduct = null;

  db.collection('PUBG').get().then((querySnapshot) => {
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const productDiv = document.createElement('div');
      productDiv.classList.add('product');
      productDiv.innerHTML = `
        <h3>${data.namaBarang}</h3>
        <p class="harga-asli">Rp${data.hargaAsli}</p>
        <p class="harga-diskon">Rp${data.hargaDiskon}</p>
      `;
      productDiv.addEventListener('click', () => {
        // Deselect previous product
        document.querySelectorAll('.product').forEach(p => p.classList.remove('selected'));
        productDiv.classList.add('selected');
        selectedProduct = data;
      });
      productContainer.appendChild(productDiv);
    });
  }).catch((error) => {
    console.error("Error mendapatkan produk: ", error);
  });

  // Logika pesanan
  const placeOrderBtn = document.getElementById('placeOrderBtn');
  const orderModal = document.getElementById('orderModal');
  const orderDetails = document.getElementById('orderDetails');
  const confirmOrderBtn = document.getElementById('confirmOrderBtn');

  let paymentMethod; // Deklarasi variabel di luar untuk akses global

  placeOrderBtn.addEventListener('click', () => {
    const uid = document.getElementById('uid').value; // Ambil nilai UID
    const phoneNumber = document.getElementById('phoneNumber').value; // Ambil nilai nomor telepon

    // Ambil metode pembayaran yang dipilih
    paymentMethod = document.querySelector('input[name="paymentMethod"]:checked')?.value;

    // Check if fields are filled
    if (!uid || !selectedProduct || !phoneNumber || !paymentMethod) {
      alert('ID, produk, nomor telepon, dan metode pembayaran harus diisi dengan benar sebelum melanjutkan.');
      return;
    }

    // Tampilkan modal dengan detail pesanan
    orderDetails.innerHTML = `
      <p><strong>ID:</strong> ${uid}</p>
      <p><strong>Produk:</strong> ${selectedProduct.namaBarang} - Rp${selectedProduct.hargaDiskon}</p>
      <p><strong>Metode Pembayaran:</strong> ${paymentMethod}</p>
      <p><strong>Nomor Telepon:</strong> ${phoneNumber}</p>
      <p><strong>Nama Game:</strong>PUBG</p>
      
    `;

    orderModal.classList.add('show');
  });

  // Menutup modal dengan seret ke bawah
  let startY = 0;
  orderModal.addEventListener('touchstart', (e) => {
    startY = e.touches[0].clientY;
  });

  orderModal.addEventListener('touchmove', (e) => {
    const currentY = e.touches[0].clientY;
    const distanceY = currentY - startY;

    if (distanceY > 50) {
      orderModal.classList.remove('show');
    }
  });

  // Konfirmasi pesanan
  confirmOrderBtn.addEventListener('click', () => {
    const uid = document.getElementById('uid').value; // Ambil nilai dari input UID
    const combinedId = uid; // Menggunakan UID sebagai combinedId

    const orderData = {
      combinedId, // Menggunakan field baru yang berisi UID
      productName: selectedProduct.namaBarang,
      productPrice: selectedProduct.hargaDiskon,
      paymentMethod, // Menggunakan variabel yang dideklarasikan sebelumnya
      phoneNumber: document.getElementById('phoneNumber').value, // Ambil nilai dari input nomor telepon
      gameName: "PUBG", // Send game name to Firebase
      timestamp: new Date()
    };

    // Tampilkan animasi pemesanan
    showLoadingAnimation();

    db.collection('Orders').add(orderData)
      .then((docRef) => {
        const orderId = docRef.id; // Get the newly created order ID
        hideLoadingAnimation(); // Hide loading animation
        alert('Pesanan berhasil dibuat!');
        window.location.href = `orderan.html?orderId=${orderId}`; // Redirect with order ID
      })
      .catch((error) => {
        hideLoadingAnimation(); // Sembunyikan animasi jika terjadi error
        console.error("Error membuat pesanan: ", error);
        alert('Terjadi kesalahan saat membuat pesanan.');
      });
  });

  // Fungsi untuk menampilkan animasi loading
  function showLoadingAnimation() {
    const loadingAnimation = document.createElement('div');
    loadingAnimation.id = 'loadingAnimation';
    loadingAnimation.innerHTML = '<p>Proses pemesanan, harap tunggu...</p>'; // Ganti dengan animasi yang diinginkan
    loadingAnimation.style.position = 'fixed';
    loadingAnimation.style.top = '50%';
    loadingAnimation.style.left = '50%';
    loadingAnimation.style.transform = 'translate(-50%, -50%)';
    loadingAnimation.style.zIndex = '1000';
    loadingAnimation.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
    loadingAnimation.style.padding = '20px';
    loadingAnimation.style.borderRadius = '8px';
    loadingAnimation.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.5)';
    document.body.appendChild(loadingAnimation);
  }

  // Fungsi untuk menyembunyikan animasi loading
  function hideLoadingAnimation() {
    const loadingAnimation = document.getElementById('loadingAnimation');
    if (loadingAnimation) {
      loadingAnimation.remove();
    }
  }

 
</script>

</body>
</html>